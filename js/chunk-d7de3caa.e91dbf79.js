(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d7de3caa"],{"0269":function(t,e,n){"use strict";var i=n("de55"),s=n.n(i);s.a},"054f":function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.issue?i("div",{staticClass:"blog-detail-container"},[i("div",{staticClass:"title-container"},[i("span",{staticClass:"title"},[t._v(t._s(t.issue.title))]),i("ul",t._l(t.issue.labels,(function(e){return i("li",{key:e.id,staticClass:"tag tag-small",style:{backgroundColor:"#"+e.color},on:{click:function(n){return t.setActiveLabel(e)}}},[t._v(" "+t._s(e.name)+" ")])})),0),i("span",{staticClass:"back",on:{click:t.back}},[i("img",{staticClass:"back-icon",attrs:{src:n("92c1")}}),t._v("返回 ")])]),i("div",{ref:"commentContainer",staticClass:"comment-container bga-back-top"},[i("comment",{attrs:{comment:t.issue}}),t._l(t.comments,(function(t){return i("comment",{key:t.id,attrs:{comment:t}})})),i("add-comment",{attrs:{commentsUrl:t.issue.comments_url},on:{addCommentSuccess:t.handleAddCommentSuccess}})],2)]):t._e()},s=[],a=(n("ac1f"),n("5319"),n("5530")),o=n("2f62"),c=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"comment"},[n("div",{staticClass:"comment-title"},[n("div",{on:{click:function(e){return t.openGitHub()}}},[n("img",{attrs:{src:t.comment.user.avatar_url}}),n("span",[t._v(t._s(t.comment.user.login))])]),n("span",{staticClass:"time"},[t._v(t._s(t.$moment(t.comment.created_at).format("YYYY-MM-DD HH:mm")))])]),n("article",{staticClass:"comment-body markdown-body",domProps:{innerHTML:t._s(t.renderedMarkdown)}})])},r=[],m={data:function(){return{renderedMarkdown:""}},props:["comment"],mounted:function(){var t=this;this.$nextTick((function(){t.renderMarkdown()}))},methods:{renderMarkdown:function(){this.renderedMarkdown="",this.comment.body_html?this.renderedMarkdown=this.comment.body_html:this.comment.body&&(this.renderedMarkdown=this.$marked(this.comment.body))},openGitHub:function(){window.open(this.comment.user.html_url)}}},u=m,d=(n("0269"),n("2877")),l=Object(d["a"])(u,c,r,!1,null,"d1aa4cda",null),h=l.exports,f=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"add-comment-container"},[n("div",{staticClass:"tab-container"},[n("ul",[n("li",{class:t.isWrite?"active":"",on:{click:function(e){t.isWrite=!0}}},[t._v("Write")]),n("li",{class:t.isWrite?"":"active",on:{click:t.renderMarkdown}},[t._v(" Preview ")])]),null==t.accessToken?n("div",[n("a",{attrs:{href:t.loginLink}},[t._v("Login")]),t._v(" with GitHub ")]):t._e()]),t.isWrite?n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.newComment,expression:"newComment"}],attrs:{disabled:null==t.accessToken,rows:"5",placeholder:"说点什么？「支持 MarkDown 语法」"},domProps:{value:t.newComment},on:{input:function(e){e.target.composing||(t.newComment=e.target.value)}}}):n("article",{staticClass:"markdown-body",domProps:{innerHTML:t._s(t.renderedMarkdown)}}),n("button",{staticClass:"add-comment-btn",attrs:{disabled:t.commentBtnDisabled},on:{click:t.addComment}},[t._v(" Comment ")])])},v=[],b=(n("99af"),n("498a"),{props:{commentsUrl:{type:String,required:!0}},data:function(){return{isWrite:!0,newComment:null,renderedMarkdown:"",isCommitting:!1}},computed:Object(a["a"])(Object(a["a"])({},Object(o["c"])(["accessToken","loginLink"])),{},{commentBtnDisabled:function(){return null==this.accessToken||this.isCommitting||null==this.newComment||0===this.newComment.trim().length}}),mounted:function(){var t=this;this.$nextTick((function(){t.fetchAccessToken()}))},methods:Object(a["a"])(Object(a["a"])({},Object(o["b"])(["setAccessToken","setTokenUser"])),{},{renderMarkdown:function(){this.renderedMarkdown="Nothing to preview",this.newComment&&(this.renderedMarkdown=this.$marked(this.newComment)),this.isWrite=!1},fetchAccessToken:function(){var t=this,e=this.$queryParse();if(e.code){var n=e.code;delete e.code;var i="".concat(window.location.origin).concat(window.location.pathname).concat(this.$queryStringify(e)).concat(window.location.hash);history.replaceState(null,null,i),this.$gitHubApi.getAccessToken(this,n).then((function(e){e.data&&e.data.access_token&&t.setAccessToken(e.data.access_token)}))}},addComment:function(){var t=this;this.isCommitting=!0,this.$gitHubApi.addComment(this,this.commentsUrl,this.newComment.trim()).then((function(e){e.data&&e.data&&(t.$emit("addCommentSuccess",e.data),t.isWrite=!0,t.newComment=null,t.renderedMarkdown="",t.isCommitting=!1)})).catch((function(e){t.isCommitting=!1,e.response&&401===e.response.status&&t.setAccessToken(null)}))}})}),p=b,g=(n("14be"),Object(d["a"])(p,f,v,!1,null,"66eeb082",null)),k=g.exports,C={data:function(){return{issue:null,number:null,comments:[],newComment:null}},components:{Comment:h,AddComment:k},created:function(){this.$route.params.issue?this.issue=this.$route.params.issue:this.$route.params.number?this.number=this.$route.params.number:this.$router.replace("/")},mounted:function(){var t=this;this.$nextTick((function(){t.issue?t.getComments():t.getIssue()}))},methods:Object(a["a"])(Object(a["a"])({},Object(o["b"])(["updateActiveLabel"])),{},{setActiveLabel:function(t){this.updateActiveLabel(t),this.$router.push("/")},getComments:function(){var t=this;this.issue&&this.issue.comments>0&&this.$gitHubApi.getComments(this,this.issue.comments_url).then((function(e){t.comments=e.data}))},getIssue:function(){var t=this;this.$gitHubApi.getIssue(this,this.number).then((function(e){t.issue=e.data,t.getComments()}))},back:function(){this.$router.go(-1)},handleAddCommentSuccess:function(t){var e=this;this.comments.push(t),this.$nextTick((function(){setTimeout((function(){var t=e.$refs.commentContainer;t.scrollTop=t.scrollHeight-t.clientHeight}),16)}))}})},w=C,_=(n("2926"),Object(d["a"])(w,i,s,!1,null,"adc26a6e",null));e["default"]=_.exports},"14be":function(t,e,n){"use strict";var i=n("92eb"),s=n.n(i);s.a},2926:function(t,e,n){"use strict";var i=n("7d1c"),s=n.n(i);s.a},5319:function(t,e,n){"use strict";var i=n("d784"),s=n("825a"),a=n("7b0b"),o=n("50c4"),c=n("a691"),r=n("1d80"),m=n("8aa5"),u=n("14c3"),d=Math.max,l=Math.min,h=Math.floor,f=/\$([$&'`]|\d\d?|<[^>]*>)/g,v=/\$([$&'`]|\d\d?)/g,b=function(t){return void 0===t?t:String(t)};i("replace",2,(function(t,e,n,i){var p=i.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,g=i.REPLACE_KEEPS_$0,k=p?"$":"$0";return[function(n,i){var s=r(this),a=void 0==n?void 0:n[t];return void 0!==a?a.call(n,s,i):e.call(String(s),n,i)},function(t,i){if(!p&&g||"string"===typeof i&&-1===i.indexOf(k)){var a=n(e,t,this,i);if(a.done)return a.value}var r=s(t),h=String(this),f="function"===typeof i;f||(i=String(i));var v=r.global;if(v){var w=r.unicode;r.lastIndex=0}var _=[];while(1){var $=u(r,h);if(null===$)break;if(_.push($),!v)break;var A=String($[0]);""===A&&(r.lastIndex=m(h,o(r.lastIndex),w))}for(var T="",M=0,y=0;y<_.length;y++){$=_[y];for(var S=String($[0]),x=d(l(c($.index),h.length),0),E=[],H=1;H<$.length;H++)E.push(b($[H]));var O=$.groups;if(f){var j=[S].concat(E,x,h);void 0!==O&&j.push(O);var L=String(i.apply(void 0,j))}else L=C(S,h,x,E,O,i);x>=M&&(T+=h.slice(M,x)+L,M=x+S.length)}return T+h.slice(M)}];function C(t,n,i,s,o,c){var r=i+t.length,m=s.length,u=v;return void 0!==o&&(o=a(o),u=f),e.call(c,u,(function(e,a){var c;switch(a.charAt(0)){case"$":return"$";case"&":return t;case"`":return n.slice(0,i);case"'":return n.slice(r);case"<":c=o[a.slice(1,-1)];break;default:var u=+a;if(0===u)return e;if(u>m){var d=h(u/10);return 0===d?e:d<=m?void 0===s[d-1]?a.charAt(1):s[d-1]+a.charAt(1):e}c=s[u-1]}return void 0===c?"":c}))}}))},"7d1c":function(t,e,n){},"92c1":function(t,e,n){t.exports=n.p+"img/back-icon.eace5832.svg"},"92eb":function(t,e,n){},de55:function(t,e,n){}}]);
//# sourceMappingURL=chunk-d7de3caa.e91dbf79.js.map